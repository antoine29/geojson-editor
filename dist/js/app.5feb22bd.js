webpackJsonp([1],{"+VGo":function(t,e){},"+skl":function(t,e){},0:function(t,e,o){t.exports=o("NHnr")},"2zNe":function(t,e){},"3iLR":function(t,e){},"4/hK":function(t,e){},EYnv:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("/5sW"),n=o("nrd6"),s=o.n(n),i=(o("EYnv"),o("jU7J"),o("NYxO"));r["default"].use(i["a"]);var a=new i["a"].Store({state:{selectedProperties:null,requiresParseFixing:!1,requiresWindingOrderFix:!1,geojson:'{\n  "type": "FeatureCollection",\n  "features": []\n}'},mutations:{setGeoJSON:function(t,e){"string"!==typeof e&&(e=JSON.stringify(e,null,2)),t.geojson=e},setSelectedProperties:function(t,e){t.selectedProperties=e},setRequiresParsingFix:function(t,e){t.requiresParseFixing=e},setRequiresWindingOrderFix:function(t,e){t.requiresWindingOrderFix=e}},getters:{featureCount:function(t){var e=JSON.parse(t.geojson);return"FeatureCollection"===e.type?e.features.length:"GeometryCollection"===e.type?e.geometrieslength:"Feature"===e.type?1:"Polygon"===e.type||"LineString"===e.type?1:0}}});o("GMVP");var c=null,u=null;function l(){u=s.a.map("map").setView([0,0],2),s.a.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19}).addTo(u),c=s.a.geoJSON(null,{style:function(){return{color:"#666C79"}},pointToLayer:function(t,e){return s.a.circleMarker(e)}}).addTo(u),u.addControl(new s.a.Control.Draw({edit:{featureGroup:c,poly:{allowIntersection:!1}},draw:{polygon:{allowIntersection:!1},circlemarker:!1,circle:!1}})),u.on(s.a.Draw.Event.CREATED,function(t){c.addLayer(t.layer),d(c.toGeoJSON())}),u.on(s.a.Draw.Event.EDITED,function(){d(c.toGeoJSON())}),u.on(s.a.Draw.Event.DELETED,function(){d(c.toGeoJSON())})}function d(t){a.commit("setGeoJSON",t)}function p(){u.fitBounds(c.getBounds())}function m(t){c.clearLayers(),c.addData(t),p()}var f={name:"LeafletMap",mounted:function(){l()}},h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Col",{staticClass:"mapContainer",attrs:{span:"14"}},[o("div",{attrs:{id:"map"}})])},g=[],v=o("XyMi");function C(t){o("Vdai")}var y=!1,x=C,w=null,O=null,b=Object(v["a"])(f,h,g,y,x,w,O),F=b.exports,j=(o("CvWX"),o("E5Az")),$=(o("4/hK"),o("x15G"),o("aGTD"),o("5IAE"),o("OTZJ")),_=(o("lDdF"),{name:"CodeArea",data:function(){return{errorLines:[],requiresParseFixing:!1,errors:{},cmOptions:{tabSize:2,cursorScrollMargin:50,mode:"text/javascript",styleActiveLine:!0,lineNumbers:!0,line:!0}}},computed:{code:function(){return this.$store.state.geojson}},methods:{onCmCodeChange:function(t){this.cleanErrorMarks(),this.errorLines=[],this.errors=$.hint(t),this.errors.forEach(function(t){t.message.startsWith("Parse error")?this.$store.commit("setRequiresParsingFix",!0):t.message.startsWith("Polygons and MultiPolygons")?this.$store.commit("setRequiresWindingOrderFix",!0):this.$store.commit("setRequiresParsingFix",!1),this.errorLines.push(t.line)},this),0===this.errors.length&&m(JSON.parse(t)),t!==this.code&&this.$store.commit("setGeoJSON",t),this.markErrors()},markErrors:function(){this.errors.forEach(function(t){this.$refs.myCm.codemirror.doc.addLineClass(t.line+1,"gutter","geojsonError")},this)},cleanErrorMarks:function(){this.errorLines.forEach(function(t){this.$refs.myCm.codemirror.doc.removeLineClass(t+1,"gutter","geojsonError")},this)}},components:{codemirror:j["codemirror"]}}),S=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Row",{staticClass:"codeArea"},[o("codemirror",{ref:"myCm",attrs:{value:t.code,options:t.cmOptions},on:{input:t.onCmCodeChange}})],1)},E=[];function P(t){o("yeeo")}var D=!1,M=P,k=null,N=null,G=Object(v["a"])(_,S,E,D,M,k,N),J=G.exports,R=(o("VjuZ"),o("acE3")),T=o("g47P"),W=o("xYDC"),q={name:"TopMenu",computed:{doesntRequireParseFixing:function(){return!this.$store.state.requiresParseFixing},doesntRequireWindingFixing:function(){return!this.$store.state.requiresWindingOrderFix},featureCount:function(){return this.$store.getters.featureCount},currentGeojson:function(){return JSON.parse(this.$store.state.geojson)}},methods:{clearFeatures:function(){this.$store.commit("setGeoJSON",{type:"FeatureCollection",features:[]})},handleFixClick:function(t){"addMarks"===t&&this.addMarks(),"fixWindingOrder"===t&&this.fixWindingOrder()},handleToolClick:function(t){"createRandomPoints"===t&&this.createRandomPoints(),"zoomTo"===t&&p(),"multipartToSinglepart"===t&&this.convertMultipart()},convertMultipart:function(){this.$store.commit("setGeoJSON",Object(T["a"])(this.currentGeojson))},createRandomPoints:function(){var t=Object(W["randomPoint"])(25,{bbox:[-180,-90,180,90]});this.$store.commit("setGeoJSON",{type:"FeatureCollection",features:this.currentGeojson.features.concat(t.features)})},addMarks:function(){var t=this.$store.state.geojson.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:([^\/])/g,'"$2":$4');this.$store.commit("setRequiresParsingFix",!1),this.$store.commit("setGeoJSON",t)},fixWindingOrder:function(){var t=Object(R["a"])(JSON.parse(this.$store.state.geojson));this.$store.commit("setGeoJSON",t),this.$store.commit("setRequiresWindingOrderFix",!1)}}},B=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Row",{staticClass:"topMenu"},[o("Dropdown",{attrs:{placement:"bottom-start"},on:{"on-click":t.handleFixClick}},[o("a",{attrs:{href:"javascript:void(0)"}},[o("Button",{staticClass:"topBtn"},[t._v("\n          Fix Errors\n          "),o("Icon",{attrs:{type:"arrow-down-b"}})],1)],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[o("DropdownItem",{attrs:{name:"addMarks",disabled:t.doesntRequireParseFixing}},[t._v("Fix Quotation Marks on Keys")]),o("DropdownItem",{attrs:{name:"fixWindingOrder",disabled:t.doesntRequireWindingFixing}},[t._v("Fix Winding Order")])],1)],1),o("Dropdown",{attrs:{placement:"bottom-start"},on:{"on-click":t.handleToolClick}},[o("a",{attrs:{href:"javascript:void(0)"}},[o("Button",{staticClass:"topBtn"},[t._v("\n          Tools\n          "),o("Icon",{attrs:{type:"arrow-down-b"}})],1)],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[o("DropdownItem",{attrs:{name:"createRandomPoints"}},[t._v("Create Random Points")]),o("DropdownItem",{attrs:{name:"zoomTo"}},[t._v("Zoom to Features")]),o("DropdownItem",{attrs:{name:"multipartToSinglepart"}},[t._v("Convert Multipart to Singlepart geometries")])],1)],1),o("Button",{staticClass:"topBtn right",on:{click:t.clearFeatures}},[t._v("\n    Clear "+t._s(t.featureCount)+" "+t._s(t.featureCount>1?"features":"feature")+"\n  ")])],1)},I=[];function L(t){o("YYww")}var A=!1,V=L,z=null,Y=null,Z=Object(v["a"])(q,B,I,A,V,z,Y),K=Z.exports,H=o("lDdF"),Q=o("vHc0"),U=o("KGwW"),X={name:"BottomMenu",methods:{copy:function(){var t=document.createElement("textarea");t.value=this.$store.state.geojson,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.$Notice.open({title:"Copied to clipboard",duration:2.5})},save:function(){var t=new File([this.code],"exported.geojson",{type:"text/plain;charset=utf-8"});H.saveAs(t)},saveInFormats:function(t){var e=null,o=null;"topo"===t&&(e=Q.topology(this.$store.state.geojson),o="topojson"),"wkt"===t&&(e=U.stringify({type:"GeometryCollection",geometries:JSON.parse(this.$store.state.geojson).features.map(function(t){return t.geometry})}),o="wkt");var r=new File([JSON.stringify(e)],"export.".concat(o),{type:"text/plain;charset=utf-8"});H.saveAs(r)}}},tt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Row",{staticClass:"bottomMenu"},[o("Button",{staticClass:"pad",on:{click:t.copy}},[t._v("Copy to clipboard")]),o("ButtonGroup",[o("Button",{on:{click:t.save}},[t._v("Save as geojson")]),o("Dropdown",{attrs:{trigger:"click",placement:"top-end"},on:{"on-click":t.saveInFormats}},[o("a",{attrs:{href:"javascript:void(0)"}},[o("Button",{attrs:{icon:"arrow-up-b"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[o("DropdownItem",{attrs:{name:"shp"}},[t._v("Shapefile")]),o("DropdownItem",{attrs:{name:"wkt"}},[t._v("WKT")]),o("DropdownItem",{attrs:{name:"topo"}},[t._v("TopoJSON")])],1)],1)],1)],1)},et=[];function ot(t){o("ZBVo")}var rt=!1,nt=ot,st=null,it=null,at=Object(v["a"])(X,tt,et,rt,nt,st,it),ct=at.exports,ut={name:"Sidebar",components:{CodeArea:J,BottomMenu:ct,TopMenu:K}},lt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Col",{staticClass:"sidebar",attrs:{span:"10"}},[o("top-menu"),o("code-area"),o("bottom-menu")],1)},dt=[];function pt(t){o("2zNe")}var mt=!1,ft=pt,ht=null,gt=null,vt=Object(v["a"])(ut,lt,dt,mt,ft,ht,gt),Ct=vt.exports,yt={name:"Properties",computed:{selectedProperties:function(){return this.$store.state.selectedProperties}}},xt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return null!==t.selectedProperties?o("div",{staticClass:"featureProperties leaflet-bar"},[o("h3",[t._v("Feature Properties")])]):t._e()},wt=[];function Ot(t){o("3iLR")}var bt=!1,Ft=Ot,jt=null,$t=null,_t=Object(v["a"])(yt,xt,wt,bt,Ft,jt,$t),St=_t.exports,Et={name:"app",store:a,components:{Map:F,Sidebar:Ct,Properties:St}},Pt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Row",{attrs:{id:"app"}},[o("Map"),o("Sidebar")],1)},Dt=[];function Mt(t){o("+VGo")}var kt=!1,Nt=Mt,Gt=null,Jt=null,Rt=Object(v["a"])(Et,Pt,Dt,kt,Nt,Gt,Jt),Tt=Rt.exports,Wt=o("BTaQ"),qt=o.n(Wt);o("+skl");r["default"].use(qt.a),r["default"].config.productionTip=!1,new r["default"]({render:function(t){return t(Tt)}}).$mount("#app")},Vdai:function(t,e){},YYww:function(t,e){},ZBVo:function(t,e){},jU7J:function(t,e){},x15G:function(t,e){},yeeo:function(t,e){}},[0]);
//# sourceMappingURL=app.5feb22bd.js.map